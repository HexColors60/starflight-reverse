// store offset = 0xec50
// overlay size   = 0x0910
// name = 'ENG-VOC_________________________ ENGINEER-------------------- )__139_____________________for MISC----------'

// =================================
// =========== DICTIONARY ==========
// =================================
// 1703:      UNK_0xec66 bitfield: 0 0 0  codep:0x744d parp:0xec66 size:0x0003
// 1704:      UNK_0xec6b bitfield: 0 0 0  codep:0x744d parp:0xec6b size:0x0003
// 1705:      UNK_0xec70 bitfield: 0 0 0  codep:0x744d parp:0xec70 size:0x0003
// 1706:      UNK_0xec75 bitfield: 0 0 0  codep:0x224c parp:0xec75 size:0x0012
// 1707:      UNK_0xec89 bitfield: 0 0 0  codep:0x224c parp:0xec89 size:0x0046
// 1708:      UNK_0xecd1 bitfield: 0 0 0  codep:0x224c parp:0xecd1 size:0x0012
// 1709:      UNK_0xece5 bitfield: 0 0 0  codep:0x224c parp:0xece5 size:0x0075
// 1710:      UNK_0xed5c bitfield: 0 0 0  codep:0x224c parp:0xed5c size:0x009c
// 1711:           DBARS bitfield: 0 0 0  codep:0x224c parp:0xee02 size:0x0044
// 1712:       (/DAMAGE) bitfield: 0 0 0  codep:0x224c parp:0xee54 size:0x0012
// 1713:      UNK_0xee68 bitfield: 0 0 0  codep:0x224c parp:0xee68 size:0x0036
// 1714:      UNK_0xeea0 bitfield: 0 0 0  codep:0x224c parp:0xeea0 size:0x0142
// 1715:      .SHIP-ITEM bitfield: 0 0 0  codep:0x4a4f parp:0xeff1 size:0x0020
// 1716:      UNK_0xf013 bitfield: 0 0 0  codep:0x224c parp:0xf013 size:0x0046
// 1717:      UNK_0xf05b bitfield: 0 0 0  codep:0x224c parp:0xf05b size:0x0023
// 1718:      UNK_0xf080 bitfield: 0 0 0  codep:0x224c parp:0xf080 size:0x0049
// 1719:      UNK_0xf0cb bitfield: 0 0 0  codep:0x224c parp:0xf0cb size:0x0032
// 1720:      UNK_0xf0ff bitfield: 0 0 0  codep:0x224c parp:0xf0ff size:0x0082
// 1721:      UNK_0xf183 bitfield: 0 0 0  codep:0x224c parp:0xf183 size:0x004c
// 1722:      UNK_0xf1d1 bitfield: 0 0 0  codep:0x224c parp:0xf1d1 size:0x0032
// 1723:      UNK_0xf205 bitfield: 0 0 0  codep:0x224c parp:0xf205 size:0x002a
// 1724:      UNK_0xf231 bitfield: 0 0 0  codep:0x224c parp:0xf231 size:0x006d
// 1725:      UNK_0xf2a0 bitfield: 0 0 0  codep:0x224c parp:0xf2a0 size:0x002c
// 1726:      UNK_0xf2ce bitfield: 0 0 0  codep:0x224c parp:0xf2ce size:0x004a
// 1727:      UNK_0xf31a bitfield: 0 0 0  codep:0x224c parp:0xf31a size:0x001e
// 1728:      UNK_0xf33a bitfield: 0 0 0  codep:0x224c parp:0xf33a size:0x001c
// 1729:      UNK_0xf358 bitfield: 0 0 0  codep:0x224c parp:0xf358 size:0x0021
// 1730:      UNK_0xf37b bitfield: 0 0 0  codep:0x224c parp:0xf37b size:0x0024
// 1731:      UNK_0xf3a1 bitfield: 0 0 0  codep:0x224c parp:0xf3a1 size:0x0022
// 1732:      UNK_0xf3c5 bitfield: 0 0 0  codep:0x224c parp:0xf3c5 size:0x0046
// 1733:       (/REPAIR) bitfield: 0 0 0  codep:0x224c parp:0xf419 size:0x0147

// =================================
// =========== VARIABLES ===========
// =================================



// 0xec62: db 0x8b 0x00 '  '
  
// ================================================
// 0xec64: WORD 'UNK_0xec66' codep=0x744d parp=0xec66
// ================================================
// 0xec66: db 0x10 0x1c 0x01 '   '
  
// ================================================
// 0xec69: WORD 'UNK_0xec6b' codep=0x744d parp=0xec6b
// ================================================
// 0xec6b: db 0x11 0x1a 0x03 '   '
  
// ================================================
// 0xec6e: WORD 'UNK_0xec70' codep=0x744d parp=0xec70
// ================================================
// 0xec70: db 0x14 0x11 0x02 '   '
  
// ================================================
// 0xec73: WORD 'UNK_0xec75' codep=0x224c parp=0xec75
// ================================================

void UNK_0xec75()
{
  Push(0x0040); pp_XBLT !();
  
  (.") string 5 "[N Y]"
  
}


// ================================================
// 0xec87: WORD 'UNK_0xec89' codep=0x224c parp=0xec89
// ================================================

void UNK_0xec89()
{
  DK-BLUE !COLOR();
  Push(0x009a); Push(0x00b4); Push(0x0071); OVER LLINE Push(0x009a); Push(0x0082); Push(0x0071); OVER LLINE Push(0x0071); Push(0x0083); OVER Push(0x00b3); LLINE Push(0x009a); Push(0x0083); OVER Push(0x00b3); LLINE 
}


// ================================================
// 0xeccf: WORD 'UNK_0xecd1' codep=0x224c parp=0xecd1
// ================================================

void UNK_0xecd1()
{
  Push(0xfff9); pp_YBLT +!();
  Push(0x0055); pp_XBLT !();
  
}


// ================================================
// 0xece3: WORD 'UNK_0xece5' codep=0x224c parp=0xece5
// ================================================

void UNK_0xece5()
{
  >2FONT();
  WHITE !COLOR();
  Push(0x0067); Push(0x00c2); POS.();
  
  (.") string 6 "DAMAGE"
  >1FONT();
  DK-BLUE !COLOR();
  Push(0x0055); Push(0x00b2); POS.();
  
  (.") string 4 "HULL"
  UNK_0xecd1();
  
  (.") string 7 "ENGINES"
  UNK_0xecd1();
  
  (.") string 7 "SENSORS"
  UNK_0xecd1();
  
  (.") string 5 "COMM."
  UNK_0xecd1();
  
  (.") string 6 "SHIELD"
  UNK_0xecd1();
  
  (.") string 7 "MISSILE"
  UNK_0xecd1();
  
  (.") string 5 "LASER"
  
}


// ================================================
// 0xed5a: WORD 'UNK_0xed5c' codep=0x224c parp=0xed5c
// ================================================

void UNK_0xed5c()
{
  DUP 2* UNK_0xec70 + >R I 1+ C@ I UNK_0xec70 = OR 
  if (Pop() == 0) goto label1124;
  CURSORS();
  pp_ABLT !();
  pp_XORMODE OFF();
  Push(cc_5); pp_LBLT !();
  I C@ 2* Push(cc_5); / pp_WBLT !();
  Push(0x0072); Push(0x00b2); ROT Push(cc_7); * - POS.();
  WHITE GREY2 DK-GREE ?MRC();
  !COLOR();
  pp_WBLT @ 
  if (Pop() == 0) goto label1125;
  BLT();
  
  label1125:
  Push(0x0072); pp_WBLT @ + pp_XBLT !();
  Push(0x0028); pp_WBLT @ - pp_WBLT !();
  GREY1 GREY1 RED ?MRC();
  !COLOR();
  pp_WBLT @ 
  if (Pop() == 0) goto label1126;
  BLT();
  
  label1126:
  
  goto label1127;
  
  label1124:
  DROP 
  label1127:
  R> DROP 
}


// ================================================
// 0xedf8: WORD 'DBARS' codep=0x224c parp=0xee02
// ================================================

void DBARS()
{
  *SHIP >C+S();
  Push(cc_7); Push(0); 
  do // (DO)
  {
  I UNK_0xed5c();
  
  } while(...); // (LOOP) 0xfffa
  UNK_0xec70 C@ Push(0x007f); AND Push(0x000f); < 
  if (Pop() == 0) goto label1128;
  Push(0x1d4c); Pust(0x0000); 
  goto label1129;
  
  label1128:
  Push(0x3a98); Pust(0x0000); 
  label1129:
  TIME 2@ D+ pp_VSTIME D!();
  ICLOSE();
  
}


// ================================================
// 0xee46: WORD '(/DAMAGE)' codep=0x224c parp=0xee54
// ================================================

void (/DAMAGE)()
{
  BLACK ERASE-A();
  UNK_0xec89();
  UNK_0xece5();
  Push(cc_3); pp_#AUX !();
  DBARS();
  
}


// ================================================
// 0xee66: WORD 'UNK_0xee68' codep=0x224c parp=0xee68
// ================================================

void UNK_0xee68()
{
  >R *SHIP >C+S();
  Push(0); Push(cc_7); Push(0); 
  do // (DO)
  {
  UNK_0xec70 I 2* + 1+ C@ J AND 
  if (Pop() == 0) goto label1157;
  1+ I SWAP LEAVE 
  label1157:
  
  } while(...); // (LOOP) 0xffe2
  R> DROP ICLOSE();
  
}


// ================================================
// 0xee9e: WORD 'UNK_0xeea0' codep=0x224c parp=0xeea0
// ================================================

void UNK_0xeea0()
{
  >R I 0= 
  if (Pop() == 0) goto label1131;
  
  (.") string 9 "DESTROYED"
  
  goto label1138;
  
  label1131:
  I Push(1); Push(0x0014); WITHIN();
  
  if (Pop() == 0) goto label1132;
  
  (.") string 10 "CRITICALLY"
  
  goto label1137;
  
  label1132:
  I Push(0x0014); Push(0x0028); WITHIN();
  
  if (Pop() == 0) goto label1133;
  
  (.") string 7 "HEAVILY"
  
  goto label1137;
  
  label1133:
  I Push(0x0028); Push(0x0046); WITHIN();
  
  if (Pop() == 0) goto label1134;
  
  (.") string 10 "MODERATELY"
  
  goto label1137;
  
  label1134:
  I Push(0x0046); Push(0x005a); WITHIN();
  
  if (Pop() == 0) goto label1135;
  
  (.") string 8 "SLIGHTLY"
  
  goto label1137;
  
  label1135:
  I Push(0x005a); Push(0x0064); WITHIN();
  
  if (Pop() == 0) goto label1136;
  
  (.") string 9 "MINIMALLY"
  
  goto label1137;
  
  label1136:
  
  (.") string 3 "NOT"
  
  label1137:
  
  (.") string 8 " DAMAGED"
  
  label1138:
  R> DROP 
}

// 0xef6e: db 0x4c 0x22 0xdc 0x1b 0x04 0x48 0x55 0x4c 0x4c 0x90 0x16 0x4c 0x22 0xdc 0x1b 0x07 0x45 0x4e 0x47 0x49 0x4e 0x45 0x53 0x90 0x16 0x4c 0x22 0xdc 0x1b 0x07 0x53 0x45 0x4e 0x53 0x4f 0x52 0x53 0x90 0x16 0x4c 0x22 0xdc 0x1b 0x0e 0x43 0x4f 0x4d 0x4d 0x55 0x4e 0x49 0x43 0x41 0x54 0x49 0x4f 0x4e 0x53 0x90 0x16 0x4c 0x22 0xdc 0x1b 0x07 0x53 0x48 0x49 0x45 0x4c 0x44 0x53 0x90 0x16 0x4c 0x22 0xdc 0x1b 0x10 0x4d 0x49 0x53 0x53 0x49 0x4c 0x45 0x20 0x4c 0x41 0x55 0x4e 0x43 0x48 0x45 0x52 0x90 0x16 0x4c 0x22 0xdc 0x1b 0x0c 0x4c 0x41 0x53 0x45 0x52 0x20 0x43 0x41 0x4e 0x4e 0x4f 0x4e 0x90 0x16 'L"   HULL  L"   ENGINES  L"   SENSORS  L"   COMMUNICATIONS  L"   SHIELDS  L"   MISSILE LAUNCHER  L"   LASER CANNON  '
  
// ================================================
// 0xefe2: WORD '.SHIP-ITEM' codep=0x4a4f parp=0xeff1
// ================================================
// 0xeff1: db 0x07 0x00 0x48 0x3a 0x00 0x00 0x70 0xef 0x01 0x00 0x7b 0xef 0x02 0x00 0x89 0xef 0x03 0x00 0x97 0xef 0x04 0x00 0xac 0xef 0x05 0x00 0xba 0xef 0x06 0x00 0xd1 0xef '  H:  p   {                     '
  
// ================================================
// 0xf011: WORD 'UNK_0xf013' codep=0x224c parp=0xf013
// ================================================

void UNK_0xf013()
{
  NULL CTPOS.();
  DUP .SHIP-ITEM 
  (.") string 2 ": "
  2* UNK_0xec70 + >R I 1+ C@ I UNK_0xec70 = OR 
  if (Pop() == 0) goto label1130;
  I C@ UNK_0xeea0();
  I C@ 0> 
  goto label1139;
  
  label1130:
  
  (.") string 4 "NONE"
  Push(0); 
  label1139:
  R> DROP 
}


// ================================================
// 0xf059: WORD 'UNK_0xf05b' codep=0x224c parp=0xf05b
// ================================================

void UNK_0xf05b()
{
  CTCR();
  
  (.") string 12 "EFFICIENCY: "
  2* UNK_0xec70 + C@ Push(0); .R();
  
  (.") string 1 "%"
  
}


// ================================================
// 0xf07e: WORD 'UNK_0xf080' codep=0x224c parp=0xf080
// ================================================

void UNK_0xf080()
{
  ?DUP 
  if (Pop() == 0) goto label1141;
  CTCR();
  
  (.") string 23 "CURRENT FUNCTIONALITY: "
  2* UNK_0xec70 + 1+ C@ Push(0x0080); AND 
  if (Pop() == 0) goto label1142;
  
  (.") string 2 "IN"
  
  label1142:
  
  (.") string 9 "OPERATIVE"
  
  label1141:
  
}


// ================================================
// 0xf0c9: WORD 'UNK_0xf0cb' codep=0x224c parp=0xf0cb
// ================================================

void UNK_0xf0cb()
{
  *ASSIGN >C+S();
  UNK_0xec6b @>C+S();
  Push(0x00fb); UNK_0xec66 C@ - Push(0x0064); ROT - * 1+ Push(0x1c1b); Push(0x5559); */();
  Push(cc_5); + CDROP();
  ICLOSE();
  
}


// ================================================
// 0xf0fd: WORD 'UNK_0xf0ff' codep=0x224c parp=0xf0ff
// ================================================

void UNK_0xf0ff()
{
  DUP Push(0x003c); < 
  if (Pop() == 0) goto label1144;
  Push(cc_5); /MOD SWAP Push(2); > + DUP .();
  
  (.") string 6 "MINUTE"
  
  goto label1147;
  
  label1144:
  DUP Push(0x05a0); < 
  if (Pop() == 0) goto label1145;
  Push(0x003c); /MOD SWAP Push(0x001e); > + DUP .();
  
  (.") string 4 "HOUR"
  
  goto label1147;
  
  label1145:
  Push(0x05a0); /MOD SWAP Push(0x02d0); > + DUP .();
  
  (.") string 3 "DAY"
  
  label1147:
  Push(1); > 
  if (Pop() == 0) goto label1146;
  Push(0x0053); EMIT 
  label1146:
  
  (.") string 1 "."
  
}


// ================================================
// 0xf181: WORD 'UNK_0xf183' codep=0x224c parp=0xf183
// ================================================

void UNK_0xf183()
{
  2* UNK_0xec70 + C@ DUP Push(0x0064); < 
  if (Pop() == 0) goto label1143;
  CTCR();
  
  (.") string 37 "ESTIMATED TIME FOR COMPLETE REPAIRS: "
  CTCR();
  UNK_0xf0cb();
  UNK_0xf0ff();
  
  goto label1148;
  
  label1143:
  DROP 
  label1148:
  
}


// ================================================
// 0xf1cf: WORD 'UNK_0xf1d1' codep=0x224c parp=0xf1d1
// ================================================

void UNK_0xf1d1()
{
  2* UNK_0xec70 + 1+ C@ Push(0x0040); AND 
  if (Pop() == 0) goto label1149;
  CTCR();
  
  (.") string 23 "CURRENTLY UNDER REPAIR."
  
  label1149:
  
}


// ================================================
// 0xf203: WORD 'UNK_0xf205' codep=0x224c parp=0xf205
// ================================================

void UNK_0xf205()
{
  *SHIP >C+S();
  >R CTINIT();
  CTERASE();
  I UNK_0xf013();
  
  if (Pop() == 0) goto label1140;
  I UNK_0xf05b();
  I UNK_0xf080();
  I UNK_0xf183();
  I UNK_0xf1d1();
  
  label1140:
  R> DROP ICLOSE();
  
}


// ================================================
// 0xf22f: WORD 'UNK_0xf231' codep=0x224c parp=0xf231
// ================================================

void UNK_0xf231()
{
  DUP 2* UNK_0xec70 + C@ Push(0x007f); AND DUP Push(1); Push(0x0064); WITHIN();
  
  if (Pop() == 0) goto label1153;
  2DROP Push(0); 
  goto label1156;
  
  label1153:
  CTERASE();
  SWAP .SHIP-ITEM 
  (.") string 2 ": "
  
  if (Pop() == 0) goto label1154;
  
  (.") string 18 "NO REPAIRS NEEDED."
  
  goto label1155;
  
  label1154:
  CTCR();
  
  (.") string 22 "DAMAGED BEYOND REPAIR."
  
  label1155:
  Push(1); 
  label1156:
  
}


// ================================================
// 0xf29e: WORD 'UNK_0xf2a0' codep=0x224c parp=0xf2a0
// ================================================

void UNK_0xf2a0()
{
  CTERASE();
  CTINIT();
  .SHIP-ITEM 
  (.") string 1 ":"
  CTCR();
  
  (.") string 27 "ALREADY UNDERGOING REPAIRS."
  
}


// ================================================
// 0xf2cc: WORD 'UNK_0xf2ce' codep=0x224c parp=0xf2ce
// ================================================

void UNK_0xf2ce()
{
  CTERASE();
  
  (.") string 17 "CEASE REPAIRS ON "
  .SHIP-ITEM CTCR();
  
  (.") string 21 "AND BEGIN REPAIRS ON "
  pp_OCRS @ .SHIP-ITEM 
  (.") string 1 "?"
  CTCR();
  UNK_0xec75();
  Y/N();
  pp_FTRIG ON();
  CTERASE();
  
}


// ================================================
// 0xf318: WORD 'UNK_0xf31a' codep=0x224c parp=0xf31a
// ================================================

void UNK_0xf31a()
{
  
  (.") string 19 "CEASING REPAIRS ON "
  .SHIP-ITEM 
  (.") string 1 "."
  
}


// ================================================
// 0xf338: WORD 'UNK_0xf33a' codep=0x224c parp=0xf33a
// ================================================

void UNK_0xf33a()
{
  DUP UNK_0xf31a();
  2* UNK_0xec70 + 1+ DUP C@ Push(0x00bf); AND SWAP C!();
  
}


// ================================================
// 0xf356: WORD 'UNK_0xf358' codep=0x224c parp=0xf358
// ================================================

void UNK_0xf358()
{
  
  (.") string 22 "CONTINUING REPAIRS ON "
  .SHIP-ITEM 
  (.") string 1 "."
  
}


// ================================================
// 0xf379: WORD 'UNK_0xf37b' codep=0x224c parp=0xf37b
// ================================================

void UNK_0xf37b()
{
  
  (.") string 21 "BEGINNING REPAIRS ON "
  .SHIP-ITEM 
  (.") string 1 "."
  pp_?REPAIR ON();
  
}


// ================================================
// 0xf39f: WORD 'UNK_0xf3a1' codep=0x224c parp=0xf3a1
// ================================================

void UNK_0xf3a1()
{
  DUP UNK_0xf37b();
  *SHIP >C+S();
  2* UNK_0xec70 + 1+ DUP C@ Push(0x0040); OR SWAP C!();
  ICLOSE();
  
}


// ================================================
// 0xf3c3: WORD 'UNK_0xf3c5' codep=0x224c parp=0xf3c5
// ================================================

void UNK_0xf3c5()
{
  >R @CRS();
  I pp_OCRS !();
  I Push(0x0054); Push(0x00b3); ROT Push(cc_7); * - POS.();
  CURSORS();
  pp_ABLT !();
  Push(0x001d); pp_WBLT !();
  Push(cc_7); pp_LBLT !();
  LT-BLUE !COLOR();
  pp_XORMODE ON();
  BLT();
  !CRS();
  R> pp_OCRS !();
  
}


// ================================================
// 0xf40b: WORD '(/REPAIR)' codep=0x224c parp=0xf419
// ================================================

void (/REPAIR)()
{
  (/DAMAGE)();
  pp_NCRS OFF();
  Push(0); UNK_0xf3c5();
  Push(0); UNK_0xf205();
  CTINIT();
  pp_FTRIG OFF();
  pp_FQUIT OFF();
  *SHIP >C+S();
  
  label1152:
  XYSCAN();
  DROP pp_NCRS @ OVER - Push(cc_7); MOD();
  DUP 0< Push(cc_7); * + pp_NCRS !();
  
  if (Pop() == 0) goto label1150;
  pp_OCRS @ UNK_0xf3c5();
  pp_NCRS @ DUP UNK_0xf3c5();
  UNK_0xf205();
  
  label1150:
  pp_FTRIG @ pp_OCRS @ 2* UNK_0xec70 + >R I 1+ C@ 0> R> UNK_0xec70 = OR AND 
  if (Pop() == 0) goto label1151;
  pp_OCRS @ UNK_0xf231();
  NOT 
  if (Pop() == 0) goto label1151;
  Push(0x0040); UNK_0xee68();
  
  if (Pop() == 0) goto label1158;
  >R I pp_OCRS @ = 
  if (Pop() == 0) goto label1159;
  I UNK_0xf2a0();
  
  goto label1161;
  
  label1159:
  I UNK_0xf2ce();
  
  if (Pop() == 0) goto label1160;
  I UNK_0xf33a();
  pp_OCRS @ CTCR();
  UNK_0xf3a1();
  
  goto label1161;
  
  label1160:
  I UNK_0xf358();
  
  label1161:
  R> DROP 
  goto label1151;
  
  label1158:
  CTERASE();
  pp_OCRS @ UNK_0xf3a1();
  
  label1151:
  ?TRIG();
  
  if (Pop() == 0) goto label1152;
  pp_OCRS @ UNK_0xf3c5();
  ICLOSE();
  
}

// 0xf4f5: db 0x45 0x4e 0x47 0x2d 0x56 0x4f 0x43 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x20 0x45 0x4e 0x47 0x49 0x4e 0x45 0x45 0x52 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x20 0x29 0x5f 0x5f 0x31 0x33 0x39 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x5f 0x66 0x6f 0x72 0x20 0x4d 0x49 0x53 0x43 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x2d 0x00 'ENG-VOC_________________________ ENGINEER-------------------- )__139_____________________for MISC---------- '
  